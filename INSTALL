Requirements:
* Python 2.6 plus:
**  psycopg2 simplejson web.py
* HBase 0.89 (http://hbase.apache.org/)
* PostgreSQL 8.4
* Apache httpd 2.2 plus:
** mod_python mod_wsgi

# set up directory, user and permissions
mkdir /etc/socorro
mkdir /var/log/socorro
mkdir /data/socorro
useradd socorro
chown socorro:socorro /var/log/socorro

# install socorro
make install

# symlink init scripts
ln -s /data/socorro/application/scripts/init.d/socorro-{monitor,processor} /etc/init.d/
chkconfig socorro-monitor on
chkconfig socorro-processor on

# symlink cron jobs
ln -s /data/socorro/application/scripts/crons/socorrorc /etc/socorro/
crontab /data/socorro/application/scripts/crons/example.crontab 

# configure apache for crash-reports (crash submissions only)
edit /etc/httpd/conf.d/socorro.conf
"""
<VirtualHost *:80>
  ServerName crash-reports.example.com
  DocumentRoot /data/socorro/application

  Options FollowSymLinks
  TimeOut 300
  Alias /submit /data/socorro/application/socorro/collector/modpython-collector.py

  # Reject excessively large POSTs
  <Location /submit>
      LimitRequestBody 20971520
  </Location>

  <Directory /data/socorro/>
      AddHandler mod_python .py
      PythonPath "sys.path+['/data/socorro/application']+['/data/socorro/thirdparty']+['/data/socorro/application/scripts']"
      PythonHandler socorro.collector.modpython-collector
      AllowOverride All
      PythonDebug On
  </Directory>

  # Anything other than /submit probably wants the user site
  ReWriteEngine on
  RewriteCond %{REQUEST_METHOD} GET
  RewriteRule .* http://crash-stats.example.com
  
  SetEnvIf X-Forwarded-For "^.*\..*\..*\..*" is-forwarded
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
  ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/crash-reports/error_log_%Y-%m-%d-%H 3600 -0"
  CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/crash-reports/access_%Y-%m-%d-%H 3600 -0" combined env=!image
  CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/crash-reports/access_%Y-%m-%d-%H 3600 -0" combined env=!is-forwarded
  CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/crash-reports/access_%Y-%m-%d-%H 3600 -0" x-forwarded-for env=is-forwarded
  AddDefaultCharset UTF-8
</VirtualHost>
"""
