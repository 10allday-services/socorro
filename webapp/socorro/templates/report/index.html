<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
 "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:py="http://genshi.edgewall.org/"
   xmlns:xi="http://www.w3.org/2001/XInclude">
 <xi:include href="../includes/site.html" />
 <head>
  <title>[@ ${c.report.signature} ] - ${c.report.product} ${c.report.version} Crash Report - Report ID: ${c.report.uuid}</title>
  ${ h.javascript_include_tag("/js/jquery/jquery-1.2.1.js") }
  ${ h.javascript_include_tag("/js/jquery/plugins/ui/ui.tabs.js") }
  ${ h.stylesheet_link_tag("/css/flora/flora.all.css") }
  <script type="text/javascript">
  $(document).ready(function(){
    $('#report-index > ul').tabs();
    $('#showallthreads').removeClass('hidden').click(function(){
    $('#allthreads').toggle(400);
      return false;
    });
    $('.signature-column').append(' <a class="expand" href="#">[Expand]</a>');
    $('.expand').click(function(){
      // swap cell title into cell text for each cell in this column
      $("td:nth-child(3)", $(this).parents('tbody')).each(function(){
        $(this).text($(this).attr('title')).removeAttr('title');
      });
      $(this).remove();
      return false;
    });
  });
  </script> 
 </head>
 <body>
  <div id="content">
   <h1 id="report-header" class="first">${c.report.product} ${c.report.version} Crash Report [@ ${c.report.signature} ]</h1>
   <div id="report-header-details">ID: <span>${c.report.uuid}</span><br/> Signature: <span>${c.report.signature}</span></div>
   <div id="report-index" class="flora">
    <ul>
     <li><a href="#details"><span>Details</span></a></li>
     <li><a href="#frames"><span>Frames</span></a></li>
     <li><a href="#modules"><span>Modules</span></a></li>
     <li><a href="#rawdump"><span>Raw Dump</span></a></li>
    </ul>
    <div id="details">
     <table class="list record">
      <tr class="odd">
       <th>Signature</th><td>${c.report.signature}</td>
      </tr>
      <tr class="even">
       <th>UUID</th><td>${c.report.uuid}</td>
      </tr>
      <tr class="odd">
       <th>Time</th><td>${c.report.date}</td>
      </tr>
      <tr class="even">
       <th>Uptime</th><td>${c.report.uptime}</td>
      </tr>
      <tr class="odd">
       <th>Product</th><td>${c.report.product}</td>
      </tr>
      <tr class="even">
       <th>Version</th><td>${c.report.version}</td>
      </tr>
      <tr class="odd">
       <th>Build ID</th><td>${c.report.build}</td>
      </tr>
      <tr class="even">
       <th>OS</th><td>${c.report.os_name}</td>
      </tr>
      <tr class="odd">
       <th>OS Version</th><td>${c.report.os_version}</td>
      </tr>
      <tr class="even">
       <th>CPU</th><td>${c.report.cpu_name}</td>
      </tr>
      <tr class="odd">
       <th>CPU Info</th><td>${c.report.cpu_info}</td>
      </tr>
      <tr class="even">
       <th>Crash Reason</th><td>${c.report.reason}</td>
      </tr>
      <tr class="odd">
       <th>Crash Address</th><td>${c.report.address}</td>
      </tr>
      <tr class="even">
       <th>Comments</th><td>${c.report.comments}</td>
      </tr>
    </table>
   </div>
   <div id="frames">
    <py:if test="c.report['dump'] is not None and len(c.report.threads) > 0">
    <table class="list" py:def="stack_trace(frames)">
     <tr>
      <th>Frame</th>
      <th>Module</th>
      <th class="signature-column">Signature</th>
      <th>Source</th>
     </tr>
     <?python row = 1 ?>
     <tr py:for="frame in frames" class="${h.get_row_class(row)}">
      <td>${frame.frame_num}</td>
      <td>${frame.module_name}</td>
      <td title="${frame.signature}">${frame.short_signature}</td>
      <td py:choose="frame.source_link is not None">
       <py:when test="True">
        ${h.link_to(frame.source_info, url=frame.source_link)} 
       </py:when>  
       <py:otherwise test="">${frame.source_info}</py:otherwise>
      </td>
      <?python row += 1 ?>
     </tr>
    </table>
    <h2>Crashing Thread</h2>
    ${stack_trace(c.report.threads[c.report.crashed_thread])}
    <p id="showallthreads" class="hidden">${h.link_to('Show/hide other threads', url='#allthreads')}</p>
    <div id="allthreads">
     <py:for each="i in range(len(c.report.threads))">
      <py:if test="i != c.report.crashed_thread">
       <h2>Thread ${i}</h2>
       ${stack_trace(c.report.threads[i])}
      </py:if>
     </py:for>
    </div>
    <script>document.getElementById("allthreads").style.display="none";</script>
    </py:if>
   </div>
   <div id="modules">
    <py:if test="c.report['dump'] is not None and len(c.report.modules) > 0">
     <table class="list">
      <tr>
       <th>Filename</th>
       <th>Version</th>
       <th>Debug Identifier</th>
       <th>Debug Filename</th>
      </tr>
      <?python row = 1 ?>
      <tr py:for="module in c.report.modules" class="${h.get_row_class(row)}">
       <td>${module.filename}</td>
       <td>${module.module_version}</td>
       <td>${module.debug_id}</td>
       <td>${module.debug_filename}</td>
       <?python row += 1 ?>
      </tr>
     </table>
    </py:if>
   </div>
   <div id="rawdump">
    <py:if test="c.report['dump'] is not None">
      <div class="code">${c.report['dump']}</div>
    </py:if>
   </div>
  </div>
 </div>
 <!-- end content -->
 </body>
</html>
