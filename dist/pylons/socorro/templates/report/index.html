<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
 "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:py="http://genshi.edgewall.org/"
   xmlns:xi="http://www.w3.org/2001/XInclude">
 <xi:include href="../includes/site.html" />
 <head>
  <title>Breakpad Crash Report: ${c.report.uuid}</title>
 ${ h.javascript_include_tag(builtins=True) }
 </head>
 <body>
  <div id="content">
   <p>${h.link_to('Record','#record')} ${h.link_to('Frames','#frames')}
   ${h.link_to('Modules','#modules')}</p>
   <h1 class="first" id="record">${c.report.product} ${c.report.version} Crash Report</h1>
   <table class="list record">
    <tr class="row1">
     <th>UUID</th><td>${c.report.uuid}</td>
    </tr>
    <tr class="row2">
     <th>Time</th><td>${c.report.date}</td>
    </tr>
    <tr class="row1">
     <th>Build ID</th><td>${c.report.build}</td>
    </tr>
    <tr class="row2">
     <th>OS</th><td>${c.report.os_name}</td>
    </tr>
    <tr class="row1">
     <th>OS Version</th><td>${c.report.os_version}</td>
    </tr>
    <tr class="row2">
     <th>CPU</th><td>${c.report.cpu_name}</td>
    </tr>
    <tr class="row1">
     <th>CPU Info</th><td>${c.report.cpu_info}</td>
    </tr>
    <tr class="row2">
     <th>Crash Reason</th><td>${c.report.reason}</td>
    </tr>
    <tr class="row1">
     <th>Crash Address</th><td>${c.report.address}</td>
    </tr>
    <tr class="row2" py:if="c.report.url is not None">
     <?python
        url = c.report.url
        if len(url) > 100:
           url = url[:100] + "&#0133;"
     ?>
     <th>URL</th><td>${h.link_to(url, url=c.report.url)}</td>
    </tr>
  </table>
   <py:if test="len(c.report.threads) > 0">
  <h2 id="frames">Stack Traces</h2>
  <table class="list" py:def="stack_trace(frames)">
     <tr>
      <th>frame</th>
      <th>signature</th>
      <th>source</th>
     </tr>
     <?python row = 0 ?>
     <tr py:for="frame in frames" class="${h.get_row_class(row)}">
      <td>${frame.frame_num}</td>
      <td>${frame.signature}</td>
      <td py:choose="frame.source_link is not None">
       <py:when test="True">
        ${h.link_to(frame.source_info, url=frame.source_link)} 
       </py:when>  
       <py:otherwise test="">${frame.source_info}</py:otherwise>
      </td>
      <?python row += 1 ?>
     </tr>
  </table>
  <h3>Stack of Crashing Thread</h3>
  ${stack_trace(c.report.threads[c.report.crashed_thread])}
  <!-- this just gives me tons of errors in the JS Console -->
  <!-- h.parallel_effects(h.visual_effect('toggle_appear', 'allthreads'),h.visual_effect('toggle_appear', 'link_toggle') -->
  <p id="link_toggle">${h.link_to('Click to view other threads', url='#allthreads', onclick=h.visual_effect('toggle_appear', 'allthreads') + ' return false;')}</p>
  <div id="allthreads">
   <py:for each="i in range(len(c.report.threads))">
     <py:if test="i != c.report.crashed_thread">
       <h3>Stack of Thread ${i}</h3>
       ${stack_trace(c.report.threads[i])}
     </py:if>
   </py:for>
  </div>
  <script>document.getElementById("allthreads").style.display="none";</script>
  </py:if>
   <py:if test="len(c.report.modules) > 0">
    <h2 id="modules">Modules</h2>
    <table class="list">
     <tr>
      <th>filename</th>
      <th>Version</th>
      <th>Debug Identifier</th>
      <th>Debug Filename</th>
     </tr>
     <?python row = 0 ?>
     <tr py:for="module in c.report.modules" class="${h.get_row_class(row)}">
      <td>${module.filename}</td>
      <td>${module.module_version}</td>
      <td>${module.debug_id}</td>
      <td>${module.debug_filename}</td>
      <?python row += 1 ?>
     </tr>
    </table>
   </py:if>
  </div>
  <!-- end content -->
 </body>
</html>
